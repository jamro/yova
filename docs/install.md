# Installation

## Hardware Shopping List

**Required Components:**
- [Raspberry Pi 5](https://www.raspberrypi.com/products/raspberry-pi-5/)
- [ReSpeaker 2-Mic HAT](https://www.seeedstudio.com/ReSpeaker-2-Mics-Pi-HAT.html)
- [Mini Speaker 8Ohm, 1Watt](https://www.adafruit.com/product/4227?srsltid=AfmBOorOZtwiBuU8zXa5sDeZ4aSFk7Tloh-Bxvi2tBpuQOI0XpLW2rrd)
- JST PH2.00 Connector, 2 pins, 2.00mm pitch

**Additional Items:**
- 7x 2mm screws for case assembly
- USB-C power supply for Raspberry Pi 5
- MicroUSB power supply for ReSpeaker HAT
- MicroSD card (32GB or larger recommended)

## Assembly

### 3D Printed Case

The case for Yova consists of 5 main elements that need to be 3D printed:
- `yova_case_top.stl` - Top cover of the case
- `yova_case_bottom.stl` - Bottom base of the case
- `yova_case_cover.stl` - Cover component with speaker cover and push-to-talk button
- `yova_case_speaker_holder.stl` - Speaker mounting bracket
- `yova_case_port_holder.stl` - Port holder for the Raspberry Pi ports

**Important:** Print in PETG or ABS material to ensure the case can withstand the heat generated by the Raspberry Pi without damage.

All 3D models are provided in the `3d_models` folder. The folder also contains:
- `yova.skp` - SketchUp project file for case customization if needed
- `yova.png` - Preview of the assembled device

![Assembled Yova Device](/3d_models/yova.png)

### Assembly Steps

1. **Prepare Components:**
   - 3D printed case parts (top, bottom, cover, speaker holder, and port holder)
   - Raspberry Pi 5
   - ReSpeaker 2-Mic HAT
   - Mini Speaker
   - 7x 2mm screws for assembly

2. **Install ReSpeaker HAT:**
   - Place the ReSpeaker 2-Mic HAT on top of the Raspberry Pi
   - Ensure proper alignment with the GPIO pins

3. **Connect Speaker:**
   - Connect the mini speaker to the audio output
   - You may need to replace the default speaker's connector with a JST PH2.00
   - **Option 1 - Using Speaker Holder:** Mount the speaker using the `yova_case_speaker_holder.stl` component
     - If your speaker has different dimensions, you may need to customize the holder
     - The holder should be glued to the `yova_case_cover.stl`
   - **Option 2 - Direct Mounting:** Some speakers come with adhesive tape attached - in such cases you do not need the holder
   - Attache the speaker to `yova_case_cover.stl`

4. **Assemble Case:**
   - Place the Raspberry Pi with HAT into the bottom case
   - Secure the Raspberry Pi with the 4x 2mm screws to the bottom case
   - Install the `yova_case_port_holder.stl` component
   - Align the top case with the bottom case
   - Secure both parts together using the remaining 3x 2mm screws
   - Attach the `yova_case_cover.stl` component as needed for additional protection

5. **Power Connections:**
   - **Raspberry Pi Power:** Connect the main power supply to the Raspberry Pi's USB-C port
   - **ReSpeaker HAT Power:** Connect a separate USB power source to the ReSpeaker HAT's USB port
   - **Important:** The ReSpeaker HAT must be powered separately to provide adequate power for the speaker and prevent damage to the audio components. Without HAT power, audio will be distorted and may damage the speaker, HAT, or Raspberry Pi.

6. **Final Check:**
   - Ensure all connections are secure
   - Verify the case is properly closed
   - Check that all ports remain accessible
   - Check if the push-to-talk button is working (there should be a click sound when pressed)

## Raspberry Pi Configuration

### System Requirements
- **Minimum:** Raspberry Pi 5 (4GB RAM recommended)
- **Storage:** 32GB+ MicroSD card (Class 10 or better)
- **OS:** Raspberry Pi OS (64-bit) - Desktop or Lite version

### Initial Setup
Prepare Raspberry Pi SD card with [Raspberry Pi Imager](https://www.raspberrypi.com/software/):
- **Raspberry Pi Device:** Raspberry Pi 5
- **Operating System:** Raspberry Pi OS (64-bit)
- **Configuration (Edit Settings):**
  - **General:**
    - Set hostname: `yova.local`
    - Set username and password: **checked**
    - Set username: `pi`
    - Set password: `your password`
    - Configure Wireless LAN: **checked**
    - SSID: `your wifi network name`
    - Password: `your wifi network password`
  - **Services:**
    - Enable SSH: **checked**
    - Allow public-key authentication: **checked** (recommended)
    - Set authorized keys for `pi`: `your public key`

## Installation

### Prerequisites
Before starting the installation, ensure you have:
- Assembled hardware (see Assembly section above)
- Raspberry Pi 5 configured and booted
- Internet connection on the Raspberry Pi
- SSH access to the Pi (see Raspberry Pi Configuration above)

### Connect to Raspberry Pi
```bash
ssh pi@yova.local
```

### Install Yova Software
Run the automated installation script:
```bash
curl -fsSL https://raw.githubusercontent.com/jamro/yova/main/scripts/install.sh -o install.sh && bash install.sh
```

## Next Steps

After installation, you may need to:

- **Configure your OpenAI API key** - Edit `~/yova/yova.config.json` and add your API key
- **Test audio functionality** - Use the test commands in the troubleshooting guide
- **Customize settings** - Modify configuration files as needed

## Additional Documentation

- **[Troubleshooting Guide](troubleshooting.md)** - Solutions for common issues, audio configuration, and service management
- **[Configuration Guide](config.md)** - Detailed configuration options and settings