[unix_http_server]
file=/tmp/supervisor.sock
chmod=0700

[supervisord]
logfile=/tmp/supervisord.log
pidfile=/tmp/supervisord.pid
childlogdir=/tmp
nodaemon=false
minfds=1024
minprocs=200

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock

[program:yova_broker]
command=poetry run yova-broker
directory=%(here)s/..
autostart=true
autorestart=true
startretries=3
startsecs=5
redirect_stderr=true
stdout_logfile=/tmp/yova_broker.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PYTHONPATH="%(here)s/.."

[program:yova_core]
command=poetry run yova
directory=%(here)s/..
autostart=true
autorestart=true
startretries=3
startsecs=5
redirect_stderr=true
stdout_logfile=/tmp/yova_core.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10
environment=PYTHONPATH="%(here)s/.."

[program:yova_api]
command=poetry run yova-api-openai
directory=%(here)s/..
autostart=true
autorestart=true
startretries=3
startsecs=5
redirect_stderr=true
stdout_logfile=/tmp/yova_api.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10

[program:yova_client]
command=poetry run yova-client-respeaker-hat
directory=%(here)s/..
autostart=true
autorestart=true
startretries=3
startsecs=5
redirect_stderr=true
stdout_logfile=/tmp/yova_client.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=10